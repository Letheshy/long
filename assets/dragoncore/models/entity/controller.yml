Layer:
  base:
    next: "界面变量.静止动画"
#  xxx:
#    animations:
##     - "xxx"



# 关于 方法.动画是否播放中  是一种模糊判断,也就是当前播放的动作中【包含】这些字就返回true的结果
#      方法.是否有动画     也同理
#      方法.播放动画       会优先寻找是否完整匹配名称的动画进行播放,如果没有,就播放包含这些字的一个动画
Trigger:
  #
  init: |-
    界面变量.静止动画 = 'idle';
    界面变量.移动动画 = 'walk';
    界面变量.攻击动画 = 'attack';
    界面变量.死亡动画 = 'death';
    
    方法.播放动画(界面变量.静止动画,0);
  animationEnd: |-
    (方法.包含(temp.args.0,'death') && !方法.包含(temp.args.0,'idle') && !方法.包含(temp.args.0,'walk'))?{
      方法.移除实体;
    }:0;
  # 当判定到实体移动速度为0时,每tick执行一次
  stand: |-
    (!方法.动画层是否播放中('base') || 方法.动画是否播放中('walk'))?{
      方法.播放动画(界面变量.静止动画);
    }:0;
  # 当判定到实体移动速度>0时,每tick执行一次
  walk: |-
    (!方法.动画层是否播放中('base') || 方法.动画是否播放中('idle'))?{
      方法.播放动画(界面变量.移动动画);
    }:0;
  # 当判定到实体手臂正在挥舞时,每tick执行一次
  attack: |-
    (!方法.动画层是否播放中('base') || 方法.动画是否播放中('idle') || 方法.动画是否播放中('walk'))?{
      方法.播放动画(界面变量.攻击动画);
    }:0;
  # 当判定到实体血量低于0时,每tick执行一次
  death: |-
    (方法.是否有动画(界面变量.死亡动画))?{
      方法.播放动画(界面变量.死亡动画);
      方法.移除死亡计数;
    }:0;